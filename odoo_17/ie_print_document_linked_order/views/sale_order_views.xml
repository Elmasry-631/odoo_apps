<odoo>
    <!-- زرار عرض الملفات في Button Box -->
    <record id="view_sale_order_form_inherit_attachments" model="ir.ui.view">
        <field name="name">sale.order.form.attachments</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet/div[@class='oe_button_box']" position="inside">
                <button name="action_view_product_attachments"
                        type="object"
                        class="oe_stat_button"
                        icon="fa-paperclip"
                        string="Product Files"/>
            </xpath>
        </field>
    </record>

    <!-- Server Action لدمج وطباعة PDF -->
    <record id="action_print_selected_attachments" model="ir.actions.server">
        <field name="name">Print Selected PDFs</field>
        <field name="model_id" ref="base.model_ir_attachment"/>
        <field name="binding_model_id" ref="base.model_ir_attachment"/>
        <field name="binding_type">action</field>
        <field name="state">code</field>
        <field name="code">
action = env['ir.attachment'].action_print_selected(env.context.get('active_ids', []))
        </field>
    </record>
</odoo>
